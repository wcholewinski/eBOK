{% extends "base.html" %}

{% block title %}Wszystkie płatności{% endblock %}

{% block content %}
<h2>Panel Płatności (Admin)</h2>

<p>
    <a href="{% url 'add_payment' %}" class="btn btn-sm btn-primary mb-3">➕ Dodaj płatność</a>
</p>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Lokator</th>
      <th>Data</th>
      <th>Typ</th>
      <th>Kwota</th>
      <th>Status</th>
      <th>Akcje</th>
    </tr>
  </thead>
  <tbody>
  {% for p in payments %}
    <tr>
      <td>{{ p.tenant.user.get_full_name }} ({{ p.tenant.user.username }})</td>
      <td>{{ p.date|date:"Y-m-d" }}</td>
      <td>{{ p.get_type_display }}</td>
      <td>{{ p.amount }} zł</td>
      <td>{{ p.get_status_display }}</td>
      <td>
        <a href="{% url 'edit_payment' p.pk %}">Edytuj</a>
      </td>
    </tr>
  {% empty %}
    <tr>
      <td colspan="6">Brak płatności do wyświetlenia.</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}
